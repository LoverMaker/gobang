(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(26),s=a.n(i),c=(a(91),a(92),a(83)),l=a(21),h=(a(93),a(34)),u=a.n(h),d=a(7),p=a(9),f=a(13),m=a(12),T=a(14),v=(a(149),a(80)),y=a.n(v),b=(a(153),a(43)),E=a.n(b),w=a(42);!function(e){e[e.EMPTY=0]="EMPTY",e[e.BLACK=1]="BLACK",e[e.WHITE=2]="WHITE"}(n||(n={}));var g,k=n,C=function(){function e(){Object(d.a)(this,e),this.board=new Array,this.rowNum=15,this.colNum=15}return Object(p.a)(e,[{key:"newBoard",value:function(){this.board=[];for(var e=0;e<this.rowNum;e++){for(var t=[],a=0;a<this.colNum;a++)t.push(k.EMPTY);this.board.push(t)}}},{key:"setChess",value:function(e,t,a){return!1!==this.checkPosition(t,a)&&this.board[t][a]===k.EMPTY&&(this.board[t][a]=e,!0)}},{key:"dropChess",value:function(e,t,a){return!1!==this.checkPosition(t,a)&&this.board[t][a]===e&&(this.board[t][a]=k.EMPTY,!0)}},{key:"checkPosition",value:function(e,t){return!(e<0||e>this.rowNum||t<0||t>this.colNum)}}]),e}();!function(e){e[e.NONE=0]="NONE",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.LEFT_SLANT=3]="LEFT_SLANT",e[e.RIGHT_SLANT=4]="RIGHT_SLANT"}(g||(g={}));var N,S=function(e,t,a,n){for(var r=e.length,o=1,i=function(){return o=1},s=n+1;s<r&&e[a][s]===t;s++)o+=1;for(var c=n-1;c>=0&&e[a][c]===t;c--)o++;if(o>=5)return g.HORIZONTAL;i();for(var l=a+1;l<r&&e[l][n]===t;l++)o++;for(var h=a-1;h>0&&e[h][n]===t;h--)o++;if(o>=5)return g.VERTICAL;i();for(var u=1;;u++){var d=a+u,p=n+u;if(d>=r||p>=r)break;if(e[d][p]!==t)break;o++}for(var f=1;;f++){var m=a-f,T=n-f;if(m<0||T<0)break;if(e[m][T]!==t)break;o++}if(o>=5)return g.RIGHT_SLANT;i();for(var v=1;;v++){var y=a+v,b=n-v;if(y<0||b<0||y>=r||b>=r)break;if(e[y][b]!==t)break;o++}for(var E=1;;E++){var w=a-E,k=n+E;if(w<0||k<0||w>=r||k>=r)break;if(e[w][k]!==t)break;o++}return o>=5?g.LEFT_SLANT:g.NONE},O=function(){function e(t){Object(d.a)(this,e),this.context=void 0,this.type=void 0,this.isComputer=void 0,this.isComputer=t}return Object(p.a)(e,[{key:"setContext",value:function(e){this.context=e}},{key:"setType",value:function(e){this.type=e}},{key:"setChess",value:function(e,t){return!(!this.context||!this.type)&&this.context.setChess(this.type,e,t)}},{key:"undo",value:function(){return this.context.undo(this.type)}}]),e}(),I=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(m.a)(t).call(this,!0))}return Object(T.a)(t,e),Object(p.a)(t,[{key:"play",value:function(){console.log("computer play")}}]),t}(O);!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.STARTED=1]="STARTED",e[e.PAUSE=2]="PAUSE",e[e.NEXT_WHITE=3]="NEXT_WHITE",e[e.NEXT_BLACK=4]="NEXT_BLACK",e[e.BLACK_WIN=5]="BLACK_WIN",e[e.WHITE_WIN=6]="WHITE_WIN",e[e.OVER=7]="OVER"}(N||(N={}));var j=function(){function e(t){Object(d.a)(this,e),this.chessBoard=new C,this.gameState=N.NOT_STARTED,this.chessSteps=[],this.blackPlayer=void 0,this.whitePlayer=void 0,this.handler=void 0,this.handler=t}return Object(p.a)(e,[{key:"getChessBoard",value:function(){return this.chessBoard.board}},{key:"getChessSteps",value:function(){return this.chessSteps}},{key:"setBlackPlayer",value:function(e){e.setContext(this),e.setType(k.BLACK),this.blackPlayer=e}},{key:"setWhitePlayer",value:function(e){e.setContext(this),e.setType(k.WHITE),this.whitePlayer=e}},{key:"getCurrentPlayer",value:function(){return this.gameState===N.NEXT_WHITE?this.whitePlayer:this.gameState===N.NEXT_BLACK?this.blackPlayer:null}},{key:"start",value:function(){this.gameState=N.STARTED,this.chessBoard.newBoard(),this.gameState=N.NEXT_BLACK,this.handler.onStart&&this.handler.onStart(this.gameState)}},{key:"pause",value:function(){this.handler.onPause&&this.handler.onPause(this.gameState)}},{key:"stop",value:function(){}},{key:"switchPlayer",value:function(){this.gameState!==N.NEXT_BLACK?this.gameState!==N.NEXT_WHITE||(this.gameState=N.NEXT_BLACK):this.gameState=N.NEXT_WHITE}},{key:"checkComputerPlay",value:function(){var e=this.getCurrentPlayer();e instanceof I&&e.play()}},{key:"setChess",value:function(e,t,a){var n=this;if(this.gameState===N.NEXT_BLACK&&e===k.BLACK||this.gameState===N.NEXT_WHITE&&e===k.WHITE){this.chessSteps.push({type:e,row:t,col:a});var r=this.chessBoard.setChess(e,t,a);if(r)(function(e){for(var t=g.NONE,a={row:-1,col:-1},n=k.EMPTY,r=0;r<e.length;r++)for(var o=0;o<e[r].length;o++){var i=e[r][o];if(a={row:r,col:o},i!==k.EMPTY&&(t=S(e,i,r,o))!==g.NONE){n=i;break}}return t===g.NONE?{found:!1,winType:n,position:[]}:t===g.HORIZONTAL?{found:!0,winType:n,position:[a,{row:a.row,col:a.col+1},{row:a.row,col:a.col+2},{row:a.row,col:a.col+3},{row:a.row,col:a.col+4}]}:t===g.VERTICAL?{found:!0,winType:n,position:[a,{row:a.row+1,col:a.col},{row:a.row+2,col:a.col},{row:a.row+3,col:a.col},{row:a.row+4,col:a.col}]}:t===g.RIGHT_SLANT?{found:!0,winType:n,position:[a,{row:a.row+1,col:a.col+1},{row:a.row+2,col:a.col+2},{row:a.row+3,col:a.col+3},{row:a.row+4,col:a.col+4}]}:t===g.LEFT_SLANT?{found:!0,winType:n,position:[a,{row:a.row+1,col:a.col-1},{row:a.row+2,col:a.col-2},{row:a.row+3,col:a.col-3},{row:a.row+4,col:a.col-4}]}:{found:!1,winType:n,position:[]}})(this.getChessBoard()).found&&this.handler.onOver(this.gameState),this.switchPlayer(),this.handler.onUpdate(this.gameState),setTimeout(function(){return n.checkComputerPlay()},100);return r}return!1}},{key:"undo",value:function(e){var t=this.chessSteps.length,a=this.chessSteps[t-1];return!!(t>0&&a.type===e&&this.chessBoard.dropChess(a.type,a.row,a.col))&&(this.chessSteps.splice(t-1,1),!0)}}]),e}(),A=(a(157),a(158),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){e.preventDefault(),e.stopPropagation()},a}return Object(T.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.row,a=e.col,n=e.type,r=e.isFive,i=e.isLast,s=e.size,c=1.5+6.53*t+"%",l=1.5+6.53*a+"%",h=n===k.WHITE?"chessman white":"chessman",u=i?"lastStep":"",d=r?"fives":"";return o.a.createElement("div",{className:"".concat(h," ").concat(u," ").concat(d),style:{marginTop:c,marginLeft:l,width:s,height:s},onClick:this.handleClick})}}]),t}(o.a.Component)),L=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(m.a)(t).call(this,!1))}return Object(T.a)(t,e),t}(O),P=(a(159),function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.right,a=t?"flex-end":"",n=e.white?"\u767d\u68cb":"\u9ed1\u68cb",r=e.isComputer?"\u7535\u8111":"\u73a9\u5bb6",i=t?"flex-end":"",s=t?"[".concat(r,"] ").concat(n):"".concat(n," [").concat(r,"]");return o.a.createElement("div",{className:"avatar",style:{justifyContent:a}},o.a.createElement("div",{className:"image-wrapper",style:{alignItems:i}},o.a.createElement("div",{className:"image person"}),o.a.createElement("span",{className:"text"},s)))}}]),t}(o.a.Component)),x=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(m.a)(t).call(this,e))).game=void 0,a.board=void 0,a.handleStartClick=function(){var e;e=!0,a.game.setBlackPlayer(e?new L:new I),a.game.setWhitePlayer(e?new I:new L),a.game.start()},a.handleClick=function(e){if(a.isStarted){if(a.board&&a.isStarted){var t=e.clientY-a.board.offsetTop,n=e.clientX-a.board.offsetLeft,r=a.board.clientWidth,o=.044*r,i=.065*r,s=Math.floor((n+o)/i)-1,c=Math.floor((t+o)/i)-1,l=a.game.getCurrentPlayer();l&&!l.isComputer&&(console.log(l),l.setChess(c,s))}}else E.a.info("\u8bf7\u70b9\u51fb\u5f00\u59cb\u6e38\u620f")},a.isLast=function(e,t){if(a.game.chessSteps.length>0){var n=a.game.chessSteps[a.game.chessSteps.length-1];return n.row===e&&n.col===t}return!1},a.game=new j(Object(w.a)(a)),a.state={gameState:N.NOT_STARTED},a}return Object(T.a)(t,e),Object(p.a)(t,[{key:"onOver",value:function(e){e===N.BLACK_WIN&&E.a.success("\u9ed1\u68cb\u80dc\u5229"),e===N.WHITE_WIN&&E.a.success("\u767d\u68cb\u80dc\u5229"),this.setState({gameState:e})}},{key:"onUpdate",value:function(e){this.setState({gameState:e})}},{key:"onStart",value:function(e){this.setState({gameState:e})}},{key:"render",value:function(){var e=this,t=this.game.getChessBoard(),a=[],n=.9*Math.min(document.body.clientWidth,500);for(var r in t)for(var i in t[r]){var s=t[r][i],c=this.isLast(Number(r),Number(i));s!==k.EMPTY&&a.push(o.a.createElement(A,{size:n/18,isLast:c,isFive:!1,type:s,key:"".concat(r,"-").concat(i),row:Number(r),col:Number(i)}))}return o.a.createElement("div",{className:"content"},o.a.createElement(P,{isComputer:!0}),o.a.createElement("div",{ref:function(t){return e.board=t},className:"board",style:{width:n,height:n},onClick:this.handleClick},a),o.a.createElement(P,{right:!0,white:!0,isComputer:!1}),o.a.createElement("div",null,o.a.createElement(y.a,{type:"primary",inline:!0,size:"small",style:{marginRight:"4px"},disabled:this.isStarted,onClick:this.handleStartClick},"\u5f00\u59cb\u6e38\u620f")))}},{key:"isStarted",get:function(){var e=this.state.gameState;return e===N.NEXT_BLACK||e===N.NEXT_WHITE}}]),t}(o.a.Component),B=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(m.a)(t).call(this,e))).renderContent=function(){return o.a.createElement("div",{style:{backgroundColor:"white",height:"100%",width:"100%",textAlign:"center",position:"absolute",top:"0",display:"flex",alignItems:"center",justifyContent:"center",color:"gray"}},"\u656c\u8bf7\u671f\u5f85\uff0c\u5c0f\u54e5\u54e5\u6b63\u5728\u706b\u70ed\u5f00\u53d1\u4e2d\u2026\u2026")},a.state={selectedTab:"apply",hidden:!1,fullScreen:!1},a}return Object(T.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{position:"fixed",height:"100%",width:"100%",top:0,zIndex:1e3}},o.a.createElement(u.a,{unselectedTintColor:"#949494",tintColor:"#33A3F4",barTintColor:"white",hidden:this.state.hidden},o.a.createElement(u.a.Item,{icon:o.a.createElement("div",{style:{width:"22px",height:"22px",background:"url(https://zos.alipayobjects.com/rmsportal/psUFoAMjkCcjqtUCNPxB.svg) center center /  21px 21px no-repeat"}}),selectedIcon:o.a.createElement("div",{style:{width:"22px",height:"22px",background:"url(https://zos.alipayobjects.com/rmsportal/IIRLrXXrFAhXVdhMWgUI.svg) center center /  21px 21px no-repeat"}}),title:"\u4e94\u5b50\u68cb",key:"Friend",dot:!0,selected:"greenTab"===this.state.selectedTab,onPress:function(){e.setState({selectedTab:"greenTab"})}},o.a.createElement(x,null)),o.a.createElement(u.a.Item,{icon:o.a.createElement("div",{style:{width:"22px",height:"22px",background:"url(https://gw.alipayobjects.com/zos/rmsportal/BTSsmHkPsQSPTktcXyTV.svg) center center /  21px 21px no-repeat"}}),selectedIcon:o.a.createElement("div",{style:{width:"22px",height:"22px",background:"url(https://gw.alipayobjects.com/zos/rmsportal/ekLecvKBnRazVLXbWOnE.svg) center center /  21px 21px no-repeat"}}),title:"\u7535\u8111\u8bbe\u7f6e",key:"Koubei",badge:"new",selected:"redTab"===this.state.selectedTab,onPress:function(){e.setState({selectedTab:"redTab"})},"data-seed":"logId1"},this.renderContent()),o.a.createElement(u.a.Item,{icon:{uri:"https://zos.alipayobjects.com/rmsportal/asJMfBrNqpMMlVpeInPQ.svg"},selectedIcon:{uri:"https://zos.alipayobjects.com/rmsportal/gjpzzcrPMkhfEqgbYvmN.svg"},title:"\u6211\u7684",key:"my",selected:"yellowTab"===this.state.selectedTab,onPress:function(){e.setState({selectedTab:"yellowTab"})}},this.renderContent())))}}]),t}(o.a.Component),_=function(){return o.a.createElement(c.a,null,o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/"},o.a.createElement(B,null))))},W=function(){return o.a.createElement(_,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},86:function(e,t,a){e.exports=a(164)},91:function(e,t,a){},92:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.b56263d4.chunk.js.map