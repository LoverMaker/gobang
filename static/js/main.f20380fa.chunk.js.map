{"version":3,"sources":["engine/game/chess/ChessType.ts","engine/util/winUtils.ts","engine/game/chess/ChessBoard.ts","engine/game/state/Observable.ts","engine/game/state/AbstractState.ts","engine/game/state/NotStartedState.ts","engine/game/chess/Chess.ts","engine/game/chess/ChessFactory.ts","engine/game/state/NextWhiteState.ts","engine/game/state/NextBlackState.ts","engine/game/state/BlackWinState.ts","engine/game/state/WhiteWinState.ts","engine/game/state/OverState.ts","engine/game/state/GameState.ts","engine/game/state/GameContext.ts","engine/player/Player.ts","engine/player/WhitePlayer.ts","engine/player/BlackPlayer.ts","engine/game/HumanGame.ts","component/Chessman.tsx","component/Avatar.tsx","engine/game/chess/Position.ts","component/GameBoard.tsx","route/AppLayout.jsx","route/index.js","App.tsx","serviceWorker.ts","index.tsx"],"names":["ChessType","FiveDirection","ChessBoard","board","Array","rowNum","colNum","this","i","row","j","push","EMPTY","chess","position","type","checkPosition","col","isFive","totalCount","length","count","reset","HORIZONTAL","VERTICAL","x","y","RIGHT_SLANT","LEFT_SLANT","NONE","Observable","list","listener","state","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","stateChange","err","return","five","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","onWin","AbstractState","gameContext","context","NotStartedState","setGameState","GameState","NEXT_BLACK","OVER","Chess","Object","classCallCheck","ChessFactory","BLACK","WHITE","NextWhiteState","success","whitePlayer","dropChess","chessSteps","splice","NEXT_WHITE","checkGameState","setChess","newWhiteChess","NextBlackState","blackPlayer","newBlackChess","BlackWinState","WhiteWinState","OverState","NOT_STARTED","BLACK_WIN","WHITE_WIN","GameContext","_this","possibleConstructorReturn","getPrototypeOf","call","gameState","setContext","notifyStateChange","newBoard","start","stop","fivePosition","direction","winType","found","console","log","findFivePosition","getChessBoard","notifyWin","Player","getType","WhitePlayer","BlackPlayer","HumanGame","Chessman","handleClick","e","preventDefault","stopPropagation","_this$props","props","isLast","size","marginTop","marginLeft","className","isLastClass","isFiveClass","_react_16_12_0_react_default","a","createElement","concat","style","width","height","onClick","React","Component","Avatar","right","justifyContent","text","white","player","isComputer","alignItems","playerText","Position","GameBoard","game","handleStartClick","isStarted","clientY","offsetTop","clientX","offsetLeft","clientWidth","offset","step","Math","floor","toast_default","info","getChessSteps","isFiveItem","fiveArray","index","p","addListener","assertThisInitialized","startGame","setState","_this2","chessMen","boardSize","min","document","body","item","Number","src_component_Chessman","key","src_component_Avatar","ref","button_default","inline","marginRight","disabled","AppLayout","renderContent","backgroundColor","textAlign","top","display","color","selectedTab","hidden","fullScreen","zIndex","tab_bar_default","unselectedTintColor","tintColor","barTintColor","Item","icon","background","selectedIcon","title","dot","selected","onPress","src_component_GameBoard","badge","data-seed","uri","AppRouter","react_router_dom","react_router","path","route_AppLayout","App","route","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f20380fa.chunk.js","sourcesContent":["enum ChessType {\n    EMPTY = 0,\n    BLACK = 1,\n    WHITE = 2\n}\n\nexport default ChessType","import ChessType from \"../game/chess/ChessType\";\nimport Position from \"../game/chess/Position\";\n\nexport enum FiveDirection {\n    // 无\n    NONE = 0,\n    // 水平\n    HORIZONTAL,\n    // 垂直\n    VERTICAL,\n    // 左斜\n    LEFT_SLANT,\n    // 右斜\n    RIGHT_SLANT\n}\n\nexport interface FivePosition {\n    found: boolean,\n    winType: ChessType\n    position: Position[]\n}\n\n/**\n * 是否五子连珠\n * @param board\n * @param type\n * @param row\n * @param col\n */\nconst isFive = function (board: number[][], type: ChessType, row: number, col: number): FiveDirection {\n    // 行列大小\n    const totalCount = board.length;\n    let count = 1;\n\n    const reset = () => count = 1\n\n    // [row, col]该点右边连珠数量\n    for (let i = col + 1; i < totalCount; i++) {\n        if (board[row][i] !== type) {\n            break\n        }\n        count += 1\n    }\n\n\n    // [row, col]该点左边连珠数量\n    for (let i = col - 1; i >= 0; i--) {\n        if (board[row][i] !== type) {\n            break\n        }\n        count++;\n    }\n\n    if (count >= 5) return FiveDirection.HORIZONTAL;\n\n    //纵向\n    reset();\n    for (let i = row + 1; i < totalCount; i++) {\n        if (board[i][col] !== type) {\n            break\n        }\n        count++;\n    }\n\n    for (let i = row - 1; i > 0; i--) {\n        if (board[i][col] !== type) {\n            break\n        }\n        count++;\n    }\n\n    if (count >= 5) return FiveDirection.VERTICAL;\n    // 右斜方向 \\\\\n    reset();\n\n    for (let i = 1; true; i++) {\n        const x = row + i, y = col + i;\n        if (x >= totalCount || y >= totalCount) {\n            break;\n        }\n        if (board[x][y] !== type) {\n            break\n        }\n        count++;\n    }\n\n    for (let i = 1; true; i++) {\n        const x = row - i, y = col - i;\n        if (x < 0 || y < 0) {\n            break;\n        }\n        if (board[x][y] !== type) {\n            break\n        }\n        count++;\n    }\n    if (count >= 5) return FiveDirection.RIGHT_SLANT;\n\n    // 左斜方向 //\n    reset();\n\n    for (let i = 1; true; i++) {\n        const x = row + i, y = col - i;\n        if (x < 0 || y < 0 || x >= totalCount || y >= totalCount) {\n            break;\n        }\n        if (board[x][y] !== type) {\n            break\n        }\n        count++;\n    }\n\n    for (let i = 1; true; i++) {\n        const x = row - i, y = col + i;\n        if (x < 0 || y < 0 || x >= totalCount || y >= totalCount) {\n            break;\n        }\n        if (board[x][y] !== type) {\n            break\n        }\n        count++;\n    }\n\n    if (count >= 5) return FiveDirection.LEFT_SLANT;\n\n    return FiveDirection.NONE;\n\n}\n\n// 找到五子连珠的点\nconst findFivePosition = (board: number[][]): FivePosition => {\n    let direction = FiveDirection.NONE\n    let position = {row: -1, col: -1}\n    let winType = ChessType.EMPTY\n    for (let i = 0; i < board.length; i++) {\n        for (let j = 0; j < board[i].length; j++) {\n            const type = board[i][j]\n            if (type !== ChessType.EMPTY) {\n                direction = isFive(board, type, i, j)\n                if (direction !== FiveDirection.NONE) {\n                    position = {row: i, col: j}\n                    winType = type\n                    break;\n                }\n            }\n        }\n    }\n\n    if (direction === FiveDirection.NONE) return {found: false, winType, position: []};\n    console.log(direction, position)\n    if (direction === FiveDirection.HORIZONTAL) {\n        return {\n            found: true,\n            winType,\n            position: [\n                position,\n                {row: position.row, col: position.col - 1},\n                {row: position.row, col: position.col - 2},\n                {row: position.row, col: position.col - 3},\n                {row: position.row, col: position.col - 4}]\n        }\n    }\n    if (direction === FiveDirection.VERTICAL) {\n        return {\n            found: true,\n            winType,\n            position: [\n                position,\n                {row: position.row - 1, col: position.col},\n                {row: position.row - 2, col: position.col},\n                {row: position.row - 3, col: position.col},\n                {row: position.row - 4, col: position.col}]\n        }\n    }\n    // \\\\\n    if (direction === FiveDirection.RIGHT_SLANT) {\n        return {\n            found: true,\n            winType,\n            position: [\n                position,\n                {row: position.row - 1, col: position.col - 1},\n                {row: position.row - 2, col: position.col - 2},\n                {row: position.row - 3, col: position.col - 3},\n                {row: position.row - 4, col: position.col - 4}]\n        }\n    }\n    // //\n    if (direction === FiveDirection.LEFT_SLANT) {\n        return {\n            found: true,\n            winType,\n            position: [\n                position,\n                {row: position.row - 1, col: position.col + 1},\n                {row: position.row - 2, col: position.col + 2},\n                {row: position.row - 3, col: position.col + 3},\n                {row: position.row - 4, col: position.col + 4}]\n        }\n    }\n    return {found: false, winType, position: []}\n}\n\nexport {\n    findFivePosition,\n}","// 棋盘类\nimport ChessType from \"./ChessType\";\nimport Chess from \"./Chess\";\nimport Position from \"./Position\";\nimport ActionContext from \"../ActionContext\";\n\nclass ChessBoard implements ActionContext {\n    board : Array<Array<ChessType>> = new Array<Array<ChessType>>()\n    rowNum: number = 15\n    colNum: number = 15\n\n    newBoard(): void {\n        this.board = []\n        for (let i = 0; i < this.rowNum; i++) {\n            const row = []\n            for (let j = 0; j < this.colNum; j++) {\n                row.push(ChessType.EMPTY)\n            }\n            this.board.push(row)\n        }\n    }\n\n    setChess(chess: Chess): boolean {\n        // 位置不合法\n        // 当前位置不为空\n        const { position, type } = chess\n        if (!this.checkPosition(position) || this.board[position.row][position.col] !== ChessType.EMPTY) {\n            return false\n        }\n        this.board[position.row][position.col] = type\n        return true\n    }\n\n    dropChess(chess: Chess): boolean {\n        // 位置不合法\n        // 当前位置不为空\n        const { position, type } = chess\n        if (!this.checkPosition(position) || this.board[position.row][position.col] !== type) {\n            return false\n        }\n        this.board[position.row][position.col] = ChessType.EMPTY\n        return true\n    }\n\n    checkPosition(position: Position) {\n        // 位置不合法\n        return !(position.row < 0 || position.row > this.rowNum || position.col < 0 || position.col > this.colNum)\n    }\n\n    getChessBoard(): Array<Array<ChessType>> {\n        return this.board;\n    }\n}\n\nexport default ChessBoard","import StateListener from \"./StateListener\";\nimport AbstractState from \"./AbstractState\";\nimport Position from \"../chess/Position\";\n\nexport default abstract class Observable {\n    list :Array<StateListener> = []\n    addListener(listener: StateListener) {\n        this.list.push(listener)\n    }\n    notifyStateChange(state: AbstractState) {\n        for(const item of this.list) {\n            item.stateChange(state)\n        }\n    }\n\n    notifyWin(state: AbstractState, five: Array<Position>) {\n        for(const item of this.list) {\n            item.onWin(state, five)\n        }\n    }\n}","import Position from \"../chess/Position\";\nimport GameContext from \"./GameContext\";\n\nexport default abstract class AbstractState {\n    protected gameContext!: GameContext\n    public setContext(context: GameContext):void {\n        this.gameContext = context\n    }\n    abstract start(): void\n    abstract setChess(position: Position): boolean\n    abstract dropChess(position: Position): boolean\n    abstract stop(): void\n\n}","import AbstractState from \"./AbstractState\"\nimport Position from \"../chess/Position\";\nimport GameState from \"./GameState\";\n\nclass NotStartedState extends AbstractState{\n    dropChess(position: Position): boolean {\n        return false\n    }\n    setChess(position: Position): boolean {\n        return false\n    }\n\n    start(): void {\n        this.gameContext.setGameState(GameState.NEXT_BLACK)\n    }\n\n    stop(): void {\n        this.gameContext.setGameState(GameState.OVER)\n    }\n}\n\nexport default NotStartedState","import ChessType from \"./ChessType\"\nimport Position from \"./Position\";\n\nclass Chess {\n   type: ChessType\n   position: Position\n   constructor(type: ChessType, position: Position){\n       this.type = type\n       this.position = position;\n   }\n}\n\nexport default Chess","import Chess from \"./Chess\";\nimport ChessType from \"./ChessType\";\nimport Position from \"./Position\";\n\nclass ChessFactory {\n    static newBlackChess(position: Position): Chess {\n       return new Chess(ChessType.BLACK, position)\n    }\n    static newWhiteChess(position: Position): Chess {\n        return new Chess(ChessType.WHITE, position)\n    }\n}\n\nexport default ChessFactory","import AbstractState from \"./AbstractState\";\nimport Position from \"../chess/Position\";\nimport ChessFactory from \"../chess/ChessFactory\";\nimport GameState from \"./GameState\";\n\nclass NextWhiteState extends AbstractState {\n    dropChess(position: Position): boolean {\n        const success = this.gameContext.whitePlayer.dropChess(position)\n        if (success) {\n            this.gameContext.chessSteps.splice(this.gameContext.chessSteps.length - 1,1);\n            this.gameContext.setGameState(GameState.NEXT_WHITE)\n            this.gameContext.checkGameState()\n        }\n        return success\n    }\n    setChess(position: Position): boolean {\n        const success = this.gameContext.whitePlayer.setChess(position)\n        if (success) {\n            this.gameContext.chessSteps.push(ChessFactory.newWhiteChess(position))\n            this.gameContext.setGameState(GameState.NEXT_BLACK)\n            this.gameContext.checkGameState()\n        }\n\n        return success\n    }\n\n    start(): void {\n    }\n\n    stop(): void {\n    }\n}\n\nexport default NextWhiteState","import AbstractState from \"./AbstractState\";\nimport Position from \"../chess/Position\";\nimport GameState from \"./GameState\";\nimport ChessFactory from \"../chess/ChessFactory\";\n\nclass NextBlackState extends AbstractState {\n    dropChess(position: Position): boolean {\n        const success = this.gameContext.blackPlayer.dropChess(position)\n        if (success) {\n            this.gameContext.chessSteps.splice(this.gameContext.chessSteps.length - 1,1);\n            this.gameContext.setGameState(GameState.NEXT_BLACK)\n            this.gameContext.checkGameState()\n        }\n        return success\n    }\n    setChess(position: Position): boolean {\n        const success = this.gameContext.blackPlayer.setChess(position)\n        if (success) {\n            this.gameContext.chessSteps.push(ChessFactory.newBlackChess(position))\n            this.gameContext.setGameState(GameState.NEXT_WHITE)\n            this.gameContext.checkGameState()\n        }\n        return success\n    }\n\n\n    start(): void {\n    }\n\n    stop(): void {\n    }\n}\n\nexport default NextBlackState","import AbstractState from \"./AbstractState\";\nimport Position from \"../chess/Position\";\n\nclass BlackWinState extends AbstractState {\n    dropChess(position: Position): boolean {\n        return false\n    }\n\n    setChess(position: Position): boolean {\n        return false\n    }\n\n    start(): void {\n    }\n\n    stop(): void {\n    }\n}\n\nexport default BlackWinState","import AbstractState from \"./AbstractState\";\nimport Position from \"../chess/Position\";\n\nclass WhiteWinState extends AbstractState {\n    dropChess(position: Position): boolean {\n        return false\n    }\n\n    setChess(position: Position): boolean {\n        return false\n    }\n\n    start(): void {\n    }\n\n    stop(): void {\n    }\n}\n\nexport default WhiteWinState","import AbstractState from \"./AbstractState\";\nimport Position from \"../chess/Position\";\n\nclass OverState extends AbstractState {\n    dropChess(position: Position): boolean {\n        return false\n    }\n\n    setChess(position: Position): boolean {\n        return false\n    }\n\n    start(): void {\n    }\n\n    stop(): void {\n    }\n}\n\nexport default OverState","import NotStartedState from \"./NotStartedState\";\nimport NextWhiteState from \"./NextWhiteState\";\nimport NextBlackState from \"./NextBlackState\";\nimport BlackWinState from \"./BlackWinState\";\nimport WhiteWinState from \"./WhiteWinState\";\nimport OverState from \"./OverState\";\n\nclass GameState {\n    public static NOT_STARTED: NotStartedState = new NotStartedState()\n    public static NEXT_WHITE: NextWhiteState = new NextWhiteState()\n    public static NEXT_BLACK: NextBlackState = new NextBlackState()\n    public static BLACK_WIN: BlackWinState = new BlackWinState()\n    public static WHITE_WIN: WhiteWinState = new WhiteWinState()\n    public static OVER: OverState = new OverState()\n}\n\nexport default GameState","import BlackPlayer from \"../../player/BlackPlayer\";\nimport WhitePlayer from \"../../player/WhitePlayer\";\nimport AbstractState from \"./AbstractState\";\nimport Position from \"../chess/Position\";\nimport ActionContext from \"../ActionContext\";\nimport ChessBoard from \"../chess/ChessBoard\";\nimport {findFivePosition} from \"../../util/winUtils\";\nimport ChessType from \"../chess/ChessType\";\nimport Observable from \"./Observable\";\nimport GameState from \"./GameState\";\nimport Chess from \"../chess/Chess\";\n\n\nclass GameContext extends Observable {\n    blackPlayer: BlackPlayer\n    whitePlayer: WhitePlayer\n    context: ActionContext = new ChessBoard()\n    chessSteps: Array<Chess> = []\n    private gameState!: AbstractState\n    constructor(blackPlayer: BlackPlayer, whitePlayer: WhitePlayer) {\n        super();\n        this.blackPlayer = blackPlayer\n        this.whitePlayer = whitePlayer\n        this.blackPlayer.setContext(this.context)\n        this.whitePlayer.setContext(this.context)\n        this.setGameState(GameState.NOT_STARTED)\n    }\n\n    public setGameState(gameState: AbstractState): void {\n        if (gameState !== this.gameState) {\n            this.gameState = gameState\n            this.gameState.setContext(this)\n            this.notifyStateChange(this.gameState)\n        }\n    }\n\n    public getGameState(): AbstractState {\n        return this.gameState\n    }\n\n    public setChess(position: Position): boolean {\n        const success = this.gameState.setChess(position)\n        this.checkGameState()\n        return success\n    }\n\n    public dropChess(position: Position): boolean {\n        return this.gameState.dropChess(position)\n    }\n\n    protected start() {\n        this.context.newBoard()\n        this.gameState.start()\n    }\n\n    protected stop() {\n        this.gameState.stop()\n    }\n\n    checkGameState(): AbstractState {\n        const fivePosition = findFivePosition(this.context.getChessBoard())\n        console.log(fivePosition)\n        if (fivePosition.found) {\n            if (fivePosition.winType === ChessType.WHITE) {\n                this.setGameState(GameState.WHITE_WIN)\n                this.notifyWin(this.gameState, fivePosition.position)\n            } else if (fivePosition.winType === ChessType.BLACK) {\n                this.setGameState(GameState.BLACK_WIN)\n                this.notifyWin(this.gameState, fivePosition.position)\n            } else {\n                this.setGameState(GameState.OVER)\n            }\n        }\n        return this.gameState\n    }\n\n    public getChessBoard(): Array<Array<ChessType>> {\n        return this.context.getChessBoard()\n    }\n\n    public getChessSteps(): Array<Chess> {\n        return this.chessSteps\n    }\n}\n\nexport default GameContext","import ActionContext from \"../game/ActionContext\";\nimport ChessType from \"../game/chess/ChessType\";\nimport IPlayer from \"./IPlayer\";\nimport Chess from \"../game/chess/Chess\";\nimport Position from \"../game/chess/Position\";\n\nabstract class Player implements IPlayer {\n    context!: ActionContext\n    type!: ChessType\n    setContext(context: ActionContext) {\n        this.context = context\n    }\n    setType(type: ChessType) {\n        this.type = type\n    }\n    setChess(position: Position): boolean {\n        if (this.context && this.getType()) {\n            return this.context.setChess(new Chess(this.getType(), position))\n        }\n        return false\n    }\n\n    dropChess(position: Position): boolean {\n        if (this.context && this.getType()) {\n            return this.context.dropChess(new Chess(this.getType(), position))\n        }\n        return false;\n    }\n    abstract getType(): ChessType;\n}\n\nexport default Player","import Player from \"./Player\";\nimport ChessType from \"../game/chess/ChessType\";\n\nclass WhitePlayer extends Player {\n    getType(): ChessType {\n        return ChessType.WHITE;\n    }\n}\n\nexport default WhitePlayer","import Player from \"./Player\";\nimport ChessType from \"../game/chess/ChessType\";\n\nclass BlackPlayer extends Player{\n    getType(): ChessType {\n        return ChessType.BLACK;\n    }\n}\n\nexport default BlackPlayer","\nimport GameContext from \"./state/GameContext\";\nimport IGame from \"./IGame\";\nimport WhitePlayer from \"../player/WhitePlayer\";\nimport BlackPlayer from \"../player/BlackPlayer\";\n\nclass HumanGame extends GameContext implements IGame {\n    constructor() {\n        super(new BlackPlayer(), new WhitePlayer())\n    }\n    pauseGame(): void {\n    }\n\n    startGame(): void {\n        this.start()\n    }\n\n    stopGame(): void {\n        this.stop()\n    }\n}\n\nexport default HumanGame","import React from 'react'\nimport ChessType from \"../engine/game/chess/ChessType\";\nimport './Chessman.less'\n\ninterface IProps {\n    row: number,\n    col: number,\n    size: number,\n    isLast: boolean\n    isFive: boolean\n    type: ChessType\n}\n\ninterface IState {\n\n}\n\n/**\n * 棋子\n */\nclass Chessman extends React.Component<IProps, IState> {\n\n    handleClick = (e: React.MouseEvent) => {\n        e.preventDefault()\n        e.stopPropagation()\n    }\n\n    render(): React.ReactNode {\n        const { row, col, type, isFive, isLast, size } = this.props\n        const marginTop = (1.5 + row * 6.53) + '%'\n        const marginLeft = (1.5 + col * 6.53) + '%'\n        const className = type === ChessType.WHITE ? 'chessman white' : 'chessman'\n        const isLastClass = isLast ? 'lastStep' : ''\n        const isFiveClass = isFive ? 'fives' : ''\n        return (<div className={`${className} ${isLastClass} ${isFiveClass}`} style={{ marginTop, marginLeft, width: size, height: size }} onClick={this.handleClick} />)\n    }\n}\n\nexport default Chessman","import React from 'react'\nimport './Avatar.less'\n\ninterface IProps {\n    right?: boolean\n    white?: boolean\n    isComputer: boolean\n}\n\ninterface IState {\n}\n\nclass Avatar extends React.Component<IProps, IState> {\n    render(): React.ReactNode {\n        const { right, white, isComputer } = this.props\n        const justifyContent = right ? 'flex-end': ''\n        const text = white ? '白棋' : '黑棋'\n        const player = isComputer ? '电脑' : '玩家'\n        const alignItems = right ? 'flex-end' : ''\n        const playerText = right ? `[${player}] ${text}` : `${text} [${player}]`\n        return <div className=\"avatar\" style={{ justifyContent }}>\n            <div className=\"image-wrapper\" style={{ alignItems }}>\n                <div className=\"image person\" />\n                <span className=\"text\">{playerText}</span>\n            </div>\n\n        </div>;\n    }\n}\n\nexport default Avatar","class Position {\n    row: number\n    col: number\n    constructor(row: number, col: number) {\n        this.row = row\n        this.col = col\n    }\n}\n\nexport default Position","import React from 'react'\nimport {Button, Toast} from 'antd-mobile'\nimport HumanGame from \"../engine/game/HumanGame\";\nimport './GameBoard.less'\nimport Chessman from \"./Chessman\";\nimport ChessType from \"../engine/game/chess/ChessType\";\nimport Avatar from \"./Avatar\";\nimport StateListener from \"../engine/game/state/StateListener\";\nimport AbstractState from \"../engine/game/state/AbstractState\";\nimport GameState from \"../engine/game/state/GameState\";\nimport IGame from \"../engine/game/IGame\";\nimport Position from '../engine/game/chess/Position'\n\ninterface IProps {\n\n}\n\ninterface IState {\n    gameState: AbstractState\n    fiveArray: Position[]\n}\n\nclass GameBoard extends React.Component<IProps, IState> implements StateListener {\n    game: IGame\n    board?: HTMLDivElement | null\n\n    constructor(props: IProps) {\n        super(props)\n        this.game = new HumanGame()\n        this.game.addListener(this)\n        this.state = {\n            gameState: GameState.NOT_STARTED,\n            fiveArray: []\n        }\n    }\n    componentDidMount(): void {\n        this.game.startGame()\n    }\n\n    onWin(state: AbstractState, five: Array<Position>): void {\n\n        this.setState({gameState: state, fiveArray: five})\n    }\n\n    onUpdate(state: AbstractState): void {\n        this.setState({gameState: state})\n    }\n\n    onStart(state: AbstractState): void {\n        this.setState({gameState: state})\n    }\n\n    handleStartClick = () => {\n    }\n\n    get isStarted() {\n        const {gameState} = this.state\n        return gameState === GameState.NEXT_BLACK || gameState === GameState.NEXT_WHITE\n    }\n\n    handleClick = (e: React.MouseEvent) => {\n        if (!this.isStarted) {\n            Toast.info('请点击开始游戏')\n            return\n        }\n        if (this.board && this.isStarted) {\n            const y = e.clientY - this.board.offsetTop,\n                x = e.clientX - this.board.offsetLeft,\n                width = this.board.clientWidth,\n                offset = width * 0.044,\n                step = width * 0.065;\n            const col = Math.floor((x + offset) / step) - 1\n            const row = Math.floor((y + offset) / step) - 1\n\n            this.game.setChess(new Position(row, col))\n\n        }\n    }\n    isLast = (row: number, col: number): boolean => {\n        const chessSteps = this.game.getChessSteps()\n        if (chessSteps.length > 0) {\n            const step = chessSteps[chessSteps.length - 1]\n            return step.position.row === row && step.position.col === col\n        }\n        return false\n    }\n    isFiveItem = (row: number, col: number): boolean => {\n        const {fiveArray} = this.state\n        for (const index in fiveArray) {\n            const p = fiveArray[index]\n            if (p.row === row && p.col === col) {\n                return true\n            }\n        }\n        return false\n    }\n\n    render(): React.ReactNode {\n        const board = this.game.getChessBoard()\n        let chessMen = []\n        const boardSize = Math.min(document.body.clientWidth, 500) * 0.9\n\n        for (const row in board) {\n            for (const col in board[row]) {\n                const item = board[row][col]\n                if (item !== ChessType.EMPTY) {\n                    const isLast = this.isLast(Number(row), Number(col))\n                    const isFive = this.isFiveItem(Number(row), Number(col))\n                    console.log(isFive, row, col)\n                    chessMen.push(<Chessman size={boardSize / 18} isLast={isLast} isFive={isFive} type={item}\n                                            key={`${row}-${col}`} row={Number(row)} col={Number(col)}/>)\n                }\n            }\n        }\n        return <div className=\"content\">\n            <Avatar isComputer={true}/>\n            <div ref={board => this.board = board} className=\"board\" style={{width: boardSize, height: boardSize}}\n                 onClick={this.handleClick}>\n                {chessMen}\n            </div>\n            <Avatar right white isComputer={false}/>\n            <div>\n                <Button type=\"primary\" inline size=\"small\" style={{marginRight: '4px'}} disabled={this.isStarted}\n                        onClick={this.handleStartClick}>开始游戏</Button>\n            </div>\n        </div>;\n    }\n\n    stateChange(state: AbstractState): void {\n        if (state === GameState.BLACK_WIN) {\n            Toast.success('黑棋胜利')\n        }\n        if (state === GameState.WHITE_WIN) {\n            Toast.success('白棋胜利')\n        }\n        this.setState({ gameState: state })\n    }\n}\n\nexport default GameBoard\n","import React from 'react'\nimport { TabBar } from 'antd-mobile';\nimport GameBoard from \"../component/GameBoard\";\n\nclass AppLayout extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedTab: 'apply',\n      hidden: false,\n      fullScreen: false,\n    };\n  }\n\n  renderContent = () => {\n    return (\n      <div style={{ backgroundColor: 'white', height: '100%', width: '100%', textAlign: 'center', position: 'absolute', top: '0', display: 'flex', alignItems: 'center', justifyContent: 'center', color: 'gray' }}>\n        敬请期待，小哥哥正在火热开发中……\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div style={{ position: 'fixed', height: '100%', width: '100%', top: 0, zIndex: 1000 }}>\n        <TabBar\n          unselectedTintColor=\"#949494\"\n          tintColor=\"#33A3F4\"\n          barTintColor=\"white\"\n          hidden={this.state.hidden}\n        >\n          <TabBar.Item\n            icon={\n              <div style={{\n                width: '22px',\n                height: '22px',\n                background: 'url(https://zos.alipayobjects.com/rmsportal/psUFoAMjkCcjqtUCNPxB.svg) center center /  21px 21px no-repeat' }}\n              />\n            }\n            selectedIcon={\n              <div style={{\n                width: '22px',\n                height: '22px',\n                background: 'url(https://zos.alipayobjects.com/rmsportal/IIRLrXXrFAhXVdhMWgUI.svg) center center /  21px 21px no-repeat' }}\n              />\n            }\n            title=\"五子棋\"\n            key=\"Friend\"\n            dot\n            selected={this.state.selectedTab === 'greenTab'}\n            onPress={() => {\n              this.setState({\n                selectedTab: 'greenTab',\n              });\n            }}\n          >\n              <GameBoard />\n          </TabBar.Item>\n          <TabBar.Item\n            icon={\n              <div style={{\n                width: '22px',\n                height: '22px',\n                background: 'url(https://gw.alipayobjects.com/zos/rmsportal/BTSsmHkPsQSPTktcXyTV.svg) center center /  21px 21px no-repeat' }}\n              />\n            }\n            selectedIcon={\n              <div style={{\n                width: '22px',\n                height: '22px',\n                background: 'url(https://gw.alipayobjects.com/zos/rmsportal/ekLecvKBnRazVLXbWOnE.svg) center center /  21px 21px no-repeat' }}\n              />\n            }\n            title=\"电脑设置\"\n            key=\"Koubei\"\n            badge={'new'}\n            selected={this.state.selectedTab === 'redTab'}\n            onPress={() => {\n              this.setState({\n                selectedTab: 'redTab',\n              });\n            }}\n            data-seed=\"logId1\"\n          >\n            {this.renderContent()}\n          </TabBar.Item>\n\n          <TabBar.Item\n            icon={{ uri: 'https://zos.alipayobjects.com/rmsportal/asJMfBrNqpMMlVpeInPQ.svg' }}\n            selectedIcon={{ uri: 'https://zos.alipayobjects.com/rmsportal/gjpzzcrPMkhfEqgbYvmN.svg' }}\n            title=\"我的\"\n            key=\"my\"\n            selected={this.state.selectedTab === 'yellowTab'}\n            onPress={() => {\n              this.setState({\n                selectedTab: 'yellowTab',\n              });\n            }}\n          >\n            {this.renderContent()}\n          </TabBar.Item>\n        </TabBar>\n      </div>\n    );\n  }\n}\nexport default AppLayout\n","import React from 'react'\nimport { HashRouter, Route, Switch } from 'react-router-dom'\nimport AppLayout from \"./AppLayout\";\n\nconst AppRouter = () => (\n  <HashRouter>\n    <Switch>\n      <Route path=\"/\">\n        <AppLayout>\n        </AppLayout>\n      </Route>\n    </Switch>\n\n  </HashRouter>\n)\n\nexport default AppRouter\n\n","import React from 'react';\nimport './App.css';\nimport AppRouter from \"./route\";\n\nconst App: React.FC = () => {\n  return (\n    <AppRouter />\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}