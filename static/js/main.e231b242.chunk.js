(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{157:function(t,e,n){},158:function(t,e,n){},159:function(t,e,n){},164:function(t,e,n){"use strict";n.r(e);var a,o=n(0),i=n.n(o),r=n(26),s=n.n(r),c=(n(91),n(92),n(83)),u=n(21),l=(n(93),n(34)),h=n.n(l),f=n(1),p=n(3),m=n(8),v=n(7),y=n(9),d=(n(149),n(80)),b=n.n(d),g=(n(153),n(43)),w=n.n(g),k=n(42);!function(t){t[t.EMPTY=0]="EMPTY",t[t.BLACK=1]="BLACK",t[t.WHITE=2]="WHITE"}(a||(a={}));var C,O=a,T=function(){function t(){Object(f.a)(this,t),this.board=new Array,this.rowNum=15,this.colNum=15}return Object(p.a)(t,[{key:"newBoard",value:function(){this.board=[];for(var t=0;t<this.rowNum;t++){for(var e=[],n=0;n<this.colNum;n++)e.push(O.EMPTY);this.board.push(e)}}},{key:"setChess",value:function(t){var e=t.position,n=t.type;return!(!this.checkPosition(e)||this.board[e.row][e.col]!==O.EMPTY)&&(this.board[e.row][e.col]=n,!0)}},{key:"dropChess",value:function(t){var e=t.position,n=t.type;return!(!this.checkPosition(e)||this.board[e.row][e.col]!==n)&&(this.board[e.row][e.col]=O.EMPTY,!0)}},{key:"checkPosition",value:function(t){return!(t.row<0||t.row>this.rowNum||t.col<0||t.col>this.colNum)}},{key:"getChessBoard",value:function(){return this.board}}]),t}();!function(t){t[t.NONE=0]="NONE",t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL",t[t.LEFT_SLANT=3]="LEFT_SLANT",t[t.RIGHT_SLANT=4]="RIGHT_SLANT"}(C||(C={}));var j=function(t,e,n,a){for(var o=t.length,i=1,r=function(){return i=1},s=a+1;s<o&&t[n][s]===e;s++)i+=1;for(var c=a-1;c>=0&&t[n][c]===e;c--)i++;if(i>=5)return C.HORIZONTAL;r();for(var u=n+1;u<o&&t[u][a]===e;u++)i++;for(var l=n-1;l>0&&t[l][a]===e;l--)i++;if(i>=5)return C.VERTICAL;r();for(var h=1;;h++){var f=n+h,p=a+h;if(f>=o||p>=o)break;if(t[f][p]!==e)break;i++}for(var m=1;;m++){var v=n-m,y=a-m;if(v<0||y<0)break;if(t[v][y]!==e)break;i++}if(i>=5)return C.RIGHT_SLANT;r();for(var d=1;;d++){var b=n+d,g=a-d;if(b<0||g<0||b>=o||g>=o)break;if(t[b][g]!==e)break;i++}for(var w=1;;w++){var k=n-w,O=a+w;if(k<0||O<0||k>=o||O>=o)break;if(t[k][O]!==e)break;i++}return i>=5?C.LEFT_SLANT:C.NONE},E=function(){function t(){Object(f.a)(this,t),this.list=[]}return Object(p.a)(t,[{key:"addListener",value:function(t){this.list.push(t)}},{key:"notifyStateChange",value:function(t){var e=!0,n=!1,a=void 0;try{for(var o,i=this.list[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){o.value.stateChange(t)}}catch(r){n=!0,a=r}finally{try{e||null==i.return||i.return()}finally{if(n)throw a}}}},{key:"notifyWin",value:function(t,e){var n=!0,a=!1,o=void 0;try{for(var i,r=this.list[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){i.value.onWin(t,e)}}catch(s){a=!0,o=s}finally{try{n||null==r.return||r.return()}finally{if(a)throw o}}}}]),t}(),S=function(){function t(){Object(f.a)(this,t),this.gameContext=void 0}return Object(p.a)(t,[{key:"setContext",value:function(t){this.gameContext=t}}]),t}(),x=function(t){function e(){return Object(f.a)(this,e),Object(m.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(y.a)(e,t),Object(p.a)(e,[{key:"dropChess",value:function(t){return!1}},{key:"setChess",value:function(t){return!1}},{key:"start",value:function(){this.gameContext.setGameState(_.NEXT_BLACK)}},{key:"stop",value:function(){this.gameContext.setGameState(_.OVER)}}]),e}(S),N=function t(e,n){Object(f.a)(this,t),this.type=void 0,this.position=void 0,this.type=e,this.position=n},I=function(){function t(){Object(f.a)(this,t)}return Object(p.a)(t,null,[{key:"newBlackChess",value:function(t){return new N(O.BLACK,t)}},{key:"newWhiteChess",value:function(t){return new N(O.WHITE,t)}}]),t}(),L=function(t){function e(){return Object(f.a)(this,e),Object(m.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(y.a)(e,t),Object(p.a)(e,[{key:"dropChess",value:function(t){var e=this.gameContext.whitePlayer.dropChess(t);return e&&(this.gameContext.chessSteps.splice(this.gameContext.chessSteps.length-1,1),this.gameContext.setGameState(_.NEXT_WHITE),this.gameContext.checkGameState()),e}},{key:"setChess",value:function(t){var e=this.gameContext.whitePlayer.setChess(t);return e&&(this.gameContext.chessSteps.push(I.newWhiteChess(t)),this.gameContext.setGameState(_.NEXT_BLACK),this.gameContext.checkGameState()),e}},{key:"start",value:function(){}},{key:"stop",value:function(){}}]),e}(S),A=function(t){function e(){return Object(f.a)(this,e),Object(m.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(y.a)(e,t),Object(p.a)(e,[{key:"dropChess",value:function(t){var e=this.gameContext.blackPlayer.dropChess(t);return e&&(this.gameContext.chessSteps.splice(this.gameContext.chessSteps.length-1,1),this.gameContext.setGameState(_.NEXT_BLACK),this.gameContext.checkGameState()),e}},{key:"setChess",value:function(t){var e=this.gameContext.blackPlayer.setChess(t);return e&&(this.gameContext.chessSteps.push(I.newBlackChess(t)),this.gameContext.setGameState(_.NEXT_WHITE),this.gameContext.checkGameState()),e}},{key:"start",value:function(){}},{key:"stop",value:function(){}}]),e}(S),W=function(t){function e(){return Object(f.a)(this,e),Object(m.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(y.a)(e,t),Object(p.a)(e,[{key:"dropChess",value:function(t){return!1}},{key:"setChess",value:function(t){return!1}},{key:"start",value:function(){}},{key:"stop",value:function(){}}]),e}(S),P=function(t){function e(){return Object(f.a)(this,e),Object(m.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(y.a)(e,t),Object(p.a)(e,[{key:"dropChess",value:function(t){return!1}},{key:"setChess",value:function(t){return!1}},{key:"start",value:function(){}},{key:"stop",value:function(){}}]),e}(S),B=function(t){function e(){return Object(f.a)(this,e),Object(m.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(y.a)(e,t),Object(p.a)(e,[{key:"dropChess",value:function(t){return!1}},{key:"setChess",value:function(t){return!1}},{key:"start",value:function(){}},{key:"stop",value:function(){}}]),e}(S),G=function t(){Object(f.a)(this,t)};G.NOT_STARTED=new x,G.NEXT_WHITE=new L,G.NEXT_BLACK=new A,G.BLACK_WIN=new W,G.WHITE_WIN=new P,G.OVER=new B;var _=G,H=function(t){function e(t,n){var a;return Object(f.a)(this,e),(a=Object(m.a)(this,Object(v.a)(e).call(this))).blackPlayer=void 0,a.whitePlayer=void 0,a.context=new T,a.chessSteps=[],a.gameState=void 0,a.blackPlayer=t,a.whitePlayer=n,a.blackPlayer.setContext(a.context),a.whitePlayer.setContext(a.context),a.setGameState(_.NOT_STARTED),a}return Object(y.a)(e,t),Object(p.a)(e,[{key:"setGameState",value:function(t){t!==this.gameState&&(this.gameState=t,this.gameState.setContext(this),this.notifyStateChange(this.gameState))}},{key:"getGameState",value:function(){return this.gameState}},{key:"setChess",value:function(t){var e=this.gameState.setChess(t);return this.checkGameState(),e}},{key:"dropChess",value:function(t){return this.gameState.dropChess(t)}},{key:"start",value:function(){this.context.newBoard(),this.gameState.start()}},{key:"stop",value:function(){this.gameState.stop()}},{key:"checkGameState",value:function(){var t=function(t){for(var e=C.NONE,n={row:-1,col:-1},a=O.EMPTY,o=0;o<t.length;o++)for(var i=0;i<t[o].length;i++){var r=t[o][i];if(r!==O.EMPTY&&(e=j(t,r,o,i))!==C.NONE){n={row:o,col:i},a=r;break}}return e===C.NONE?{found:!1,winType:a,position:[]}:(console.log(e,n),e===C.HORIZONTAL?{found:!0,winType:a,position:[n,{row:n.row,col:n.col-1},{row:n.row,col:n.col-2},{row:n.row,col:n.col-3},{row:n.row,col:n.col-4}]}:e===C.VERTICAL?{found:!0,winType:a,position:[n,{row:n.row-1,col:n.col},{row:n.row-2,col:n.col},{row:n.row-3,col:n.col},{row:n.row-4,col:n.col}]}:e===C.RIGHT_SLANT?{found:!0,winType:a,position:[n,{row:n.row-1,col:n.col-1},{row:n.row-2,col:n.col-2},{row:n.row-3,col:n.col-3},{row:n.row-4,col:n.col-4}]}:e===C.LEFT_SLANT?{found:!0,winType:a,position:[n,{row:n.row-1,col:n.col+1},{row:n.row-2,col:n.col+2},{row:n.row-3,col:n.col+3},{row:n.row-4,col:n.col+4}]}:{found:!1,winType:a,position:[]})}(this.context.getChessBoard());return console.log(t),t.found&&(t.winType===O.WHITE?(this.setGameState(_.WHITE_WIN),this.notifyWin(this.gameState,t.position)):t.winType===O.BLACK?(this.setGameState(_.BLACK_WIN),this.notifyWin(this.gameState,t.position)):this.setGameState(_.OVER)),this.gameState}},{key:"getChessBoard",value:function(){return this.context.getChessBoard()}},{key:"getChessSteps",value:function(){return this.chessSteps}}]),e}(E),R=function(){function t(){Object(f.a)(this,t),this.context=void 0,this.type=void 0}return Object(p.a)(t,[{key:"setContext",value:function(t){this.context=t}},{key:"setType",value:function(t){this.type=t}},{key:"setChess",value:function(t){return!(!this.context||!this.getType())&&this.context.setChess(new N(this.getType(),t))}},{key:"dropChess",value:function(t){return!(!this.context||!this.getType())&&this.context.dropChess(new N(this.getType(),t))}}]),t}(),M=function(t){function e(){return Object(f.a)(this,e),Object(m.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(y.a)(e,t),Object(p.a)(e,[{key:"getType",value:function(){return O.WHITE}}]),e}(R),K=function(t){function e(){return Object(f.a)(this,e),Object(m.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(y.a)(e,t),Object(p.a)(e,[{key:"getType",value:function(){return O.BLACK}}]),e}(R),X=function(t){function e(){return Object(f.a)(this,e),Object(m.a)(this,Object(v.a)(e).call(this,new K,new M))}return Object(y.a)(e,t),Object(p.a)(e,[{key:"pauseGame",value:function(){}},{key:"startGame",value:function(){this.start()}},{key:"stopGame",value:function(){this.stop()}}]),e}(H),z=(n(157),n(158),function(t){function e(){var t,n;Object(f.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).handleClick=function(t){t.preventDefault(),t.stopPropagation()},n}return Object(y.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this.props,e=t.row,n=t.col,a=t.type,o=t.isFive,r=t.isLast,s=t.size,c=1.5+6.53*e+"%",u=1.5+6.53*n+"%",l=a===O.WHITE?"chessman white":"chessman",h=r?"lastStep":"",f=o?"fives":"";return i.a.createElement("div",{className:"".concat(l," ").concat(h," ").concat(f),style:{marginTop:c,marginLeft:u,width:s,height:s},onClick:this.handleClick})}}]),e}(i.a.Component)),F=(n(159),function(t){function e(){return Object(f.a)(this,e),Object(m.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(y.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this.props,e=t.right,n=e?"flex-end":"",a=t.white?"\u767d\u68cb":"\u9ed1\u68cb",o=t.isComputer?"\u7535\u8111":"\u73a9\u5bb6",r=e?"flex-end":"",s=e?"[".concat(o,"] ").concat(a):"".concat(a," [").concat(o,"]");return i.a.createElement("div",{className:"avatar",style:{justifyContent:n}},i.a.createElement("div",{className:"image-wrapper",style:{alignItems:r}},i.a.createElement("div",{className:"image person"}),i.a.createElement("span",{className:"text"},s)))}}]),e}(i.a.Component)),V=function t(e,n){Object(f.a)(this,t),this.row=void 0,this.col=void 0,this.row=e,this.col=n},Y=function(t){function e(t){var n;return Object(f.a)(this,e),(n=Object(m.a)(this,Object(v.a)(e).call(this,t))).game=void 0,n.board=void 0,n.handleStartClick=function(){},n.handleClick=function(t){if(n.isStarted){if(n.board&&n.isStarted){var e=t.clientY-n.board.offsetTop,a=t.clientX-n.board.offsetLeft,o=n.board.clientWidth,i=.044*o,r=.065*o,s=Math.floor((a+i)/r)-1,c=Math.floor((e+i)/r)-1;n.game.setChess(new V(c,s))}}else w.a.info("\u8bf7\u70b9\u51fb\u5f00\u59cb\u6e38\u620f")},n.isLast=function(t,e){var a=n.game.getChessSteps();if(a.length>0){var o=a[a.length-1];return o.position.row===t&&o.position.col===e}return!1},n.isFiveItem=function(t,e){var a=n.state.fiveArray;for(var o in a){var i=a[o];if(i.row===t&&i.col===e)return!0}return!1},n.game=new X,n.game.addListener(Object(k.a)(n)),n.state={gameState:_.NOT_STARTED,fiveArray:[]},n}return Object(y.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.game.startGame()}},{key:"onWin",value:function(t,e){this.setState({gameState:t,fiveArray:e})}},{key:"onUpdate",value:function(t){this.setState({gameState:t})}},{key:"onStart",value:function(t){this.setState({gameState:t})}},{key:"render",value:function(){var t=this,e=this.game.getChessBoard(),n=[],a=.9*Math.min(document.body.clientWidth,500);for(var o in e)for(var r in e[o]){var s=e[o][r];if(s!==O.EMPTY){var c=this.isLast(Number(o),Number(r)),u=this.isFiveItem(Number(o),Number(r));console.log(u,o,r),n.push(i.a.createElement(z,{size:a/18,isLast:c,isFive:u,type:s,key:"".concat(o,"-").concat(r),row:Number(o),col:Number(r)}))}}return i.a.createElement("div",{className:"content"},i.a.createElement(F,{isComputer:!0}),i.a.createElement("div",{ref:function(e){return t.board=e},className:"board",style:{width:a,height:a},onClick:this.handleClick},n),i.a.createElement(F,{right:!0,white:!0,isComputer:!1}),i.a.createElement("div",null,i.a.createElement(b.a,{type:"primary",inline:!0,size:"small",style:{marginRight:"4px"},disabled:this.isStarted,onClick:this.handleStartClick},"\u5f00\u59cb\u6e38\u620f")))}},{key:"stateChange",value:function(t){t===_.BLACK_WIN&&w.a.success("\u9ed1\u68cb\u80dc\u5229"),t===_.WHITE_WIN&&w.a.success("\u767d\u68cb\u80dc\u5229"),this.setState({gameState:t})}},{key:"isStarted",get:function(){var t=this.state.gameState;return t===_.NEXT_BLACK||t===_.NEXT_WHITE}}]),e}(i.a.Component),D=function(t){function e(t){var n;return Object(f.a)(this,e),(n=Object(m.a)(this,Object(v.a)(e).call(this,t))).renderContent=function(){return i.a.createElement("div",{style:{backgroundColor:"white",height:"100%",width:"100%",textAlign:"center",position:"absolute",top:"0",display:"flex",alignItems:"center",justifyContent:"center",color:"gray"}},"\u656c\u8bf7\u671f\u5f85\uff0c\u5c0f\u54e5\u54e5\u6b63\u5728\u706b\u70ed\u5f00\u53d1\u4e2d\u2026\u2026")},n.state={selectedTab:"apply",hidden:!1,fullScreen:!1},n}return Object(y.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement("div",{style:{position:"fixed",height:"100%",width:"100%",top:0,zIndex:1e3}},i.a.createElement(h.a,{unselectedTintColor:"#949494",tintColor:"#33A3F4",barTintColor:"white",hidden:this.state.hidden},i.a.createElement(h.a.Item,{icon:i.a.createElement("div",{style:{width:"22px",height:"22px",background:"url(https://zos.alipayobjects.com/rmsportal/psUFoAMjkCcjqtUCNPxB.svg) center center /  21px 21px no-repeat"}}),selectedIcon:i.a.createElement("div",{style:{width:"22px",height:"22px",background:"url(https://zos.alipayobjects.com/rmsportal/IIRLrXXrFAhXVdhMWgUI.svg) center center /  21px 21px no-repeat"}}),title:"\u4e94\u5b50\u68cb",key:"Friend",dot:!0,selected:"greenTab"===this.state.selectedTab,onPress:function(){t.setState({selectedTab:"greenTab"})}},i.a.createElement(Y,null)),i.a.createElement(h.a.Item,{icon:i.a.createElement("div",{style:{width:"22px",height:"22px",background:"url(https://gw.alipayobjects.com/zos/rmsportal/BTSsmHkPsQSPTktcXyTV.svg) center center /  21px 21px no-repeat"}}),selectedIcon:i.a.createElement("div",{style:{width:"22px",height:"22px",background:"url(https://gw.alipayobjects.com/zos/rmsportal/ekLecvKBnRazVLXbWOnE.svg) center center /  21px 21px no-repeat"}}),title:"\u7535\u8111\u8bbe\u7f6e",key:"Koubei",badge:"new",selected:"redTab"===this.state.selectedTab,onPress:function(){t.setState({selectedTab:"redTab"})},"data-seed":"logId1"},this.renderContent()),i.a.createElement(h.a.Item,{icon:{uri:"https://zos.alipayobjects.com/rmsportal/asJMfBrNqpMMlVpeInPQ.svg"},selectedIcon:{uri:"https://zos.alipayobjects.com/rmsportal/gjpzzcrPMkhfEqgbYvmN.svg"},title:"\u6211\u7684",key:"my",selected:"yellowTab"===this.state.selectedTab,onPress:function(){t.setState({selectedTab:"yellowTab"})}},this.renderContent())))}}]),e}(i.a.Component),U=function(){return i.a.createElement(c.a,null,i.a.createElement(u.c,null,i.a.createElement(u.a,{path:"/"},i.a.createElement(D,null))))},Z=function(){return i.a.createElement(U,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},86:function(t,e,n){t.exports=n(164)},91:function(t,e,n){},92:function(t,e,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.e231b242.chunk.js.map